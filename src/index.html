<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Terrarium</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { min-height: 100vh; font-family: -apple-system, system-ui, sans-serif; }
    #root { min-height: 100vh; transition: opacity 0.2s; }
    #welcome {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background: linear-gradient(135deg, #1e1035 0%, #2d1854 50%, #1e1035 100%);
      color: #c4b5fd;
      user-select: none;
    }
    #welcome svg {
      width: 96px;
      height: 96px;
      margin-bottom: 24px;
      opacity: 0.85;
    }
    #welcome h1 {
      font-size: 28px;
      font-weight: 600;
      color: #e9d5ff;
      margin-bottom: 8px;
    }
    #welcome p {
      font-size: 14px;
      color: #8b7aab;
      margin-bottom: 32px;
    }
    #open-btn {
      background: linear-gradient(135deg, #7c3aed, #6d28d9);
      color: #fff;
      border: none;
      padding: 12px 32px;
      border-radius: 10px;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      transition: transform 0.1s, box-shadow 0.2s;
      box-shadow: 0 4px 20px rgba(124, 58, 237, 0.3);
    }
    #open-btn:hover {
      transform: scale(1.03);
      box-shadow: 0 6px 28px rgba(124, 58, 237, 0.45);
    }
    #open-btn:active { transform: scale(0.98); }
    #drop-hint {
      margin-top: 20px;
      font-size: 12px;
      color: #6b5a8a;
    }
    #install-banner {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: linear-gradient(135deg, #2d1854, #1e1035);
      color: #c4b5fd;
      font-size: 13px;
      padding: 10px 20px;
      text-align: center;
      z-index: 9999;
      border-bottom: 1px solid #7c3aed;
    }
    #install-banner.visible { display: block; }
    #node-banner {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: linear-gradient(135deg, #3b1a0a, #2a1000);
      color: #fbbf24;
      font-size: 13px;
      padding: 10px 20px;
      text-align: center;
      z-index: 10000;
      border-bottom: 1px solid #f59e0b;
      gap: 8px;
      align-items: center;
      justify-content: center;
    }
    #node-banner.visible { display: flex; }
    #node-banner-icon { font-size: 16px; }
    #node-banner-link {
      color: #fbbf24;
      text-decoration: underline;
      margin-left: 4px;
    }
    #node-banner-close {
      background: none;
      border: none;
      color: #fbbf24;
      cursor: pointer;
      font-size: 18px;
      margin-left: 12px;
      padding: 0 4px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    .spinner {
      display: inline-block;
      width: 14px;
      height: 14px;
      border: 2px solid #7c3aed;
      border-top-color: #c4b5fd;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      vertical-align: middle;
      margin-right: 8px;
    }
    #drop-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(30, 16, 53, 0.92);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 3px dashed #a78bfa;
      z-index: 9998;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 8px;
      font-size: 20px;
      font-weight: 600;
      color: #e9d5ff;
    }
    #drop-overlay .drop-sub {
      font-size: 13px;
      font-weight: 400;
      color: #8b7aab;
    }
    #drop-overlay.visible { display: flex; }
    #error-banner {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #1a1a2e;
      border-top: 2px solid #e74c3c;
      color: #ff6b6b;
      font-family: 'SF Mono', 'Menlo', 'Consolas', monospace;
      font-size: 13px;
      z-index: 9999;
      transform: translateY(100%);
      transition: transform 0.2s ease-out;
    }
    #error-banner.visible { transform: translateY(0); }
    #error-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 16px;
      cursor: pointer;
      user-select: none;
    }
    #error-title {
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    #error-title::before {
      content: '\2715';
      color: #e74c3c;
      font-size: 14px;
    }
    #error-toggle {
      background: none;
      border: none;
      color: #888;
      cursor: pointer;
      font-size: 16px;
      padding: 0 4px;
    }
    #error-detail {
      padding: 0 16px 12px;
      white-space: pre-wrap;
      word-break: break-word;
      max-height: 200px;
      overflow-y: auto;
      color: #ccc;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <div id="root">
    <div id="welcome">
      <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="wPanelTL" x1="0" y1="1" x2="0.8" y2="0">
            <stop offset="0%" stop-color="#ddd6fe" stop-opacity="0.65"/>
            <stop offset="100%" stop-color="#8b5cf6" stop-opacity="0.3"/>
          </linearGradient>
          <linearGradient id="wPanelTR" x1="1" y1="1" x2="0.2" y2="0">
            <stop offset="0%" stop-color="#c4b5fd" stop-opacity="0.5"/>
            <stop offset="100%" stop-color="#7c3aed" stop-opacity="0.35"/>
          </linearGradient>
          <linearGradient id="wPanelBL" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#c4b5fd" stop-opacity="0.55"/>
            <stop offset="100%" stop-color="#6d28d9" stop-opacity="0.3"/>
          </linearGradient>
          <linearGradient id="wPanelBR" x1="1" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#a78bfa" stop-opacity="0.4"/>
            <stop offset="100%" stop-color="#4c1d95" stop-opacity="0.45"/>
          </linearGradient>
        </defs>
        <!-- Ambient glow -->
        <ellipse cx="256" cy="280" rx="175" ry="195" fill="#4a2080" opacity="0.4"/>
        <!-- Terrarium base -->
        <path d="M 256 52 L 100 240 L 128 395 L 256 462 L 384 395 L 412 240 Z" fill="#1e1040"/>
        <!-- Panels -->
        <path d="M 256 52 L 100 240 L 256 240 Z" fill="url(#wPanelTL)" stroke="#a88de0" stroke-width="3" stroke-linejoin="round"/>
        <path d="M 256 52 L 256 240 L 412 240 Z" fill="url(#wPanelTR)" stroke="#a88de0" stroke-width="3" stroke-linejoin="round"/>
        <path d="M 100 240 L 128 395 L 256 462 L 256 240 Z" fill="url(#wPanelBL)" stroke="#a88de0" stroke-width="3" stroke-linejoin="round"/>
        <path d="M 256 240 L 256 462 L 384 395 L 412 240 Z" fill="url(#wPanelBR)" stroke="#a88de0" stroke-width="3" stroke-linejoin="round"/>
        <line x1="100" y1="240" x2="412" y2="240" stroke="#a88de0" stroke-width="3"/>
        <!-- Glass highlight -->
        <path d="M 210 110 L 160 200 L 225 210 Z" fill="#f0eaff" opacity="0.2"/>
        <!-- Code brackets -->
        <path d="M 205 280 L 168 318 L 205 356" fill="none" stroke="#ffffff" stroke-width="12" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M 272 274 L 240 362" fill="none" stroke="#ffffff" stroke-width="11" stroke-linecap="round"/>
        <path d="M 307 280 L 344 318 L 307 356" fill="none" stroke="#ffffff" stroke-width="12" stroke-linecap="round" stroke-linejoin="round"/>
        <!-- Sparkles -->
        <path transform="translate(408,105)" d="M 0 -14 L 3.5 -3.5 L 14 0 L 3.5 3.5 L 0 14 L -3.5 3.5 L -14 0 L -3.5 -3.5 Z" fill="#ff8ad0"/>
        <path transform="translate(88,140)" d="M 0 -10 L 2.5 -2.5 L 10 0 L 2.5 2.5 L 0 10 L -2.5 2.5 L -10 0 L -2.5 -2.5 Z" fill="#f5b0e0"/>
        <path transform="translate(430,310)" d="M 0 -9 L 2.2 -2.2 L 9 0 L 2.2 2.2 L 0 9 L -2.2 2.2 L -9 0 L -2.2 -2.2 Z" fill="#ff85c8"/>
        <path transform="translate(72,350)" d="M 0 -7 L 1.8 -1.8 L 7 0 L 1.8 1.8 L 0 7 L -1.8 1.8 L -7 0 L -1.8 -1.8 Z" fill="#ffc0e8"/>
      </svg>
      <h1>Terrarium</h1>
      <p>A tiny terrarium to view your TSX components</p>
      <button id="open-btn">Open TSX File</button>
      <span id="drop-hint">or drag and drop a .tsx file onto the app</span>
    </div>
  </div>
  <div id="install-banner"><span class="spinner"></span>Installing dependencies for the first time...</div>
  <div id="node-banner">
    <span id="node-banner-icon">&#9888;</span>
    <span id="node-banner-text"></span>
    <a id="node-banner-link" href="#" target="_blank">Install Node.js</a>
    <button id="node-banner-close">&times;</button>
  </div>
  <div id="drop-overlay">
    <span>Drop .tsx file here</span>
    <span class="drop-sub">Release to open and render</span>
  </div>
  <div id="error-banner">
    <div id="error-header" onclick="toggleError()">
      <span id="error-title">Build Error</span>
      <button id="error-toggle">&#9660;</button>
    </div>
    <pre id="error-detail"></pre>
  </div>
  <script type="module" src="renderer.js"></script>
</body>
</html>
